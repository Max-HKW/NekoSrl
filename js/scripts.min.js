const navMenu=document.getElementById("nav-menu"),navToggle=document.getElementById("nav-toggle"),nav=document.querySelector(".nav");navToggle&&navToggle.addEventListener("click",()=>{navMenu.classList.toggle("show-menu"),nav.classList.toggle("nav__open")});const cards=document.querySelectorAll(".card"),observer=new IntersectionObserver(e=>{let t=0;e.forEach(e=>{e.isIntersecting?(e.target.style.transitionDelay=`${t}s`,e.target.classList.add("animate"),t+=.2):(e.target.classList.remove("animate"),e.target.style.transitionDelay="0s")})},{threshold:.1});cards.forEach(e=>observer.observe(e)),document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelectorAll(".feature__circle"),t=document.querySelector(".feature__indicator"),l=document.querySelectorAll(".feature__buttons button"),n=1,i=t=>{(n="next"===t.target.id?++n:--n)===e.length?l[1].disabled=!0:1===n?l[0].disabled=!0:l.forEach(e=>e.disabled=!1)};l.forEach(e=>{e.addEventListener("click",i)});let a=document.getElementById("feature__form"),s=Array.from(document.querySelectorAll("fieldset.step")),o=document.getElementById("prev"),r=document.getElementById("next"),d=document.querySelector(".summary"),c=document.querySelector(".step2Content"),u=document.getElementById("successMessage"),m=document.getElementById("modal"),p=document.getElementById("personalDataForm"),y=document.getElementById("confirmBtn"),$=document.getElementById("backBtn"),g=(document.querySelector(".optionalChoices"),document.querySelector(".apiLabel")),h=document.querySelector(".apiCheckbox"),v=document.querySelector(".go-back-btn"),E=document.getElementById("btnSummary"),b=0,_="";0===b&&(o.disabled=!0);let f={"10_individuale_10":300,"10_individuale_100":750,"10_30studenti_10":500,"10_30studenti_100":1250,"50_individuale_10":800,"50_individuale_100":2e3,"50_30studenti_10":1e3,"50_30studenti_100":2500};function k(e,t){document.querySelectorAll(`input[name="${e}"]`).forEach(e=>{e!==t&&(e.checked=!1)})}function L(){let e=s[b].querySelectorAll('input[type="checkbox"]');r.disabled=!Array.from(e).some(e=>e.checked)}function S(l){s.forEach((t,n)=>{t.classList.toggle("active",n===l),e[n].classList[`${n<=l?"add":"remove"}`]("active")}),t.style.width=`${l/(e.length-1)*100}%`,L()}function C(e,t,l){let n=document.createElement("label");n.classList.add("custom-checkbox");let i=document.createElement("input");i.type="checkbox",i.name=e,i.value=t;let a=document.createElement("span");return a.className="checkmark",n.appendChild(i),n.appendChild(a),n.appendChild(document.createTextNode(" "+l)),n}function q(e,t,l){let n=document.createElement("label");n.classList.add("optionalChoices"),n.setAttribute("data-tooltip","+ 5000 €");let i=document.createElement("input");i.type="checkbox",i.name=e,i.value=t,i.addEventListener("change",()=>{i.checked?n.classList.add("active"):n.classList.remove("active")});let a=document.createElement("span");return a.className="checkmark",n.appendChild(i),n.appendChild(a),n.appendChild(document.createTextNode(" "+l)),n}function I(){c.innerHTML="";let e=a.querySelector('input[name="tipo"]:checked')?.value;_=e,"singolo"===e?(c.appendChild(C("opzione_singolo","10_100","10 anni")),c.appendChild(C("opzione_singolo","10_250","100 anni"))):"multipli"===e&&(c.appendChild(C("numero_corsi","10","10 corsi")),c.appendChild(C("numero_corsi","50","50 corsi"))),c.querySelectorAll('input[type="checkbox"]').forEach(e=>{e.addEventListener("change",()=>{k(e.name,e),L()})}),L()}function B(){let e=new FormData(a),t=e.get("tipo"),l=0,n=document.createElement("ul");n.className="card-list";let i=(e,t,l,i)=>{let a=document.createElement("li");a.className=i,a.innerHTML=`<i class="ri-${l}"></i> <strong>${e}:</strong> ${t}`,n.appendChild(a)};if(i("Tipo",`${t}`,"book-shelf-line","list-summary"),"singolo"===t){let s=e.get("opzione_singolo");if(!s)return;let o=s.split("_")[0];l="10_100"===s?100:250,i("Durata",`${o} anni`,"hourglass-line","list-summary")}if("multipli"===t){let r=e.get("numero_corsi"),c=e.get("studenti"),u=e.get("durata"),m=`${r}_${c}_${u}`;l=f[m]||0,i("Corsi",`${r}`,"book-line","list-summary"),i("Studenti",`${"individuale"===c?"Singolo studente":"30 studenti"}`,"team-line","list-summary"),i("Durata",`${u}`,"hourglass-line","list-summary")}if("personalizzato"===t){let y=new FormData(p),$=y.get("nome"),g=y.get("email"),h=y.get("messaggio");$&&g&&h&&(i("Nome",$,"user-line","list-summary"),i("Email",g,"mail-line","list-summary"),i("Messaggio",h,"chat-1-line","list-summary"))}if(d.textContent="",("singolo"===t||"multipli"===t)&&i("Prezzo pacchetto",`${l.toLocaleString()} €`,"money-euro-circle-line","list-summary"),i("Setup iniziale","+ 1000 €","settings-4-line","list-summary"),d.appendChild(n),"singolo"===t||"multipli"===t){let v=document.createElement("input");v.type="text",v.name="contatto_nome",v.placeholder="Inserisci il tuo nome",v.required=!0;let b=document.createElement("input");b.type="email",b.name="contatto_email",b.placeholder="Inserisci la tua email",b.required=!0;let _=document.createElement("li");_.className="list-summary",_.appendChild(v);let k=document.createElement("li");k.className="list-summary",k.appendChild(b),d.appendChild(_),d.appendChild(k)}d.appendChild(q("accesso_api","5000","Accesso API")),d.appendChild(E),E.style.display="inline-block"}function x(){b===s.length-1?(B(),r.style.display="none",E.style.display="inline-block"):(r.style.display="block",E.style.display="none"),o.disabled=0===b;let e=s[b].querySelectorAll('input[type="checkbox"]');e.forEach(e=>{e.checked=!1})}a.addEventListener("change",e=>{"checkbox"===e.target.type&&(k(e.target.name,e.target),"tipo"===e.target.name&&I()),L()}),r.addEventListener("click",()=>{let e=a.querySelector('input[name="tipo"]:checked')?.value;if(0===b&&"singolo"===e){S(b=1),x();return}if(1===b&&"singolo"===e){b=s.length-1,B(),S(b),x();return}if(0===b&&"personalizzato"===e){m.showModal(),r.style.display="none",o.style.display="none";return}b===s.length-1&&(E.style.display="block"),S(++b),x()}),p.addEventListener("submit",e=>{e.preventDefault()});let w=p.querySelector('[name="nome"]'),A=p.querySelector('[name="email"]'),z=p.querySelector('[name="messaggio"]');function N(){let e=w.value.trim(),t=A.value.trim(),l=z.value.trim(),n=A.checkValidity();y.disabled=!(e&&t&&l&&n)}N(),[w,A,z].forEach(e=>{e.addEventListener("input",N)}),y.addEventListener("click",()=>{m.close(),b=s.length-1,B(),S(b),x(),o.style.display="block"}),$.addEventListener("click",()=>{m.close(),b=0,B(),S(b),x(),r.style.display="block",r.disabled=!0,o.style.display="block",o.disabled=!0}),o.addEventListener("click",()=>{b===s.length-1?b=0:b--,S(b),x(),u.style.display="none",E.style.display="inline-block",g.style.display="flex",h.checked=!1,r.disabled=!0}),v.addEventListener("click",()=>{S(b=0),u.style.display="none",x(),a.style.display="block",conditionalPadding(),r.disabled=!0,o.disabled=!0}),a.addEventListener("submit",e=>{let t=document.getElementById("btnSummary");e.preventDefault(),u.style.display="block",a.style.display="none",t.style.display="none",conditionalPadding()}),L()});const swiper=new Swiper(".swiper",{loop:!0,slidesPerView:"auto",centeredSlides:!0,spaceBetween:14,grabCursor:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});function conditionalPadding(){let e=document.getElementById("feature__form"),t=document.getElementById("reviews"),l=window.getComputedStyle(e).display;"none"===l?t.classList.add("padding-top"):t.classList.remove("padding-top")}const scrollUp=()=>{let e=document.getElementById("scrollUp");window.scrollY>=350?e.classList.add("show-scroll"):e.classList.remove("show-scroll")};window.addEventListener("scroll",scrollUp);